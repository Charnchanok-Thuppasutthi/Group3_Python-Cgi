    <!DOCTYPE html>
    <html>
        <head>
            <meta charset="utf-8" />
            <title>Hello</title>
            <style>
                * { padding: 0; margin: 0; }
                canvas { background: #eee; display: block; margin: 0 auto; }
            </style>
        </head>
        <body>
        <canvas id="myCanvas" width="650" height="650"></canvas>
            <script>
                class Main{
                    constructor(){
                        this.canvas = document.getElementById('myCanvas');
                        this.ctx = this.canvas.getContext("2d");

                        //for grid world
                        this.gridSize = 50 ;
                        this.column = this.canvas.width / this.gridSize ; //13
                        this.row = this.canvas.height / this.gridSize ; //13

                        var snake = new Snake( this.gridSize);
                        this.snake = snake ;
                        var fruit = new Fruit( Math.floor(Math.random() * this.column)  , ( Math.floor(Math.random() * this.row) )
                        , this.gridSize); // random fruit first time 
                        this.fruit = fruit ; 
                        
                        var input= new InputProcessor();
                         this.ip = input;
                    }
                    //สร้างตารางแต่ละช่อง
                    createField(column ,row ){
                        this.ctx.beginPath();
                        this.ctx.rect(column*this.gridSize , row*this.gridSize ,this.gridSize,this.gridSize);
                        this.ctx.fillStyle = "#ffffff";
                        this.ctx.fill();
                        this.ctx.stroke();
                        this.ctx.closePath();
                    }
                    drawNumber( x , y ) {
                        this.ctx.font = "20px Arial";
                        this.ctx.fillStyle = "#0095DD";
                        this.ctx.fillText( x , x*this.gridSize , y*this.gridSize , 100);
                        this.ctx.fillStyle = "#000000"
                        this.ctx.fillText( y , x*this.gridSize+20 , y*this.gridSize , 100);
                    }
                    //สร้างตารางทั้งหมด
                    createWorld(){
                        for ( var i = 0 ; i <= this.row ; i++ ){
                            for ( var j = 0 ; j <= this.column ; j++){
                                this.createField( i , j ); 
                                //this.drawNumber( i , j); //check generate block
                            }
                        }
                    }
                    draw(){
                        this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);    
                        this.createWorld();
                        this.snake.drawSnake();
                        this.fruit.drawFruit();
                        this.snake.move();
                    }
                }

                class Snake{
                    constructor(grid){
                        this.canvas = document.getElementById('myCanvas');
                        this.ctx = this.canvas.getContext("2d");
                        this.body = [[0,0],[1,0],[2,0]]; // starting point
                        this.direction = 'right'; //can be up,down,left,right
                        this.gridSize = grid ;
                    }

                    move(){
                        var head_arr = this.body.length;
                        var head_pos = this.body[head_arr-1]
                        var x = head_pos[0];
                        var y = head_pos[1];
                        if (this.direction == 'up'){
                            //x += 0 ;
                            y -= 1 ;
                        }else if(this.direction == 'down'){
                            //x += 0 ;
                            y += 1 ;
                        }else if(this.direction == 'left'){
                            x -= 1 ;
                            //y += 0 ;
                        }else{
                            x += 1 ;
                           // y += 0 ;
                        }
                        this.body.shift(); //remove the old tail position
                        this.body.push([x,y]); //move the head to new (x,y)
                    }
                    turnLeft(){
                        /*if ( this.direction == 'up' ){
                            this.direction = 'left' ;
                        }
                        else if ( this.direction == 'down' ){
                            this.direction = 'left' ;
                        }
                        else if ( this.direction == 'left' ){
                            this.direction = 'left' ;
                        }
                        else {
                            this.direction = 'left' ;
                        }*/
                        this.direction = 'left' ;
                    }
                    turnRight(){
                        /*if ( this.direction == 'up' ){
                            this.direction = 'right' ;
                        }
                        else if ( this.direction == 'down' ){
                            this.direction = 'right' ;
                        }
                        else if ( this.direction == 'left' ){
                            this.direction = 'right' ;
                        }
                        else {
                            this.direction = 'right' ;
                        }*/
                        this.direction = 'right';
                    }
                    turnDown(){
                        this.direction = 'down';
                    }
                    turnUp(){
                        this.direction ='up' ;
                    }
                    // when eat a fruit the tail will remain in the same position and move only the head
                    eat_fruit(x,y){
                        this.body.push((x,y));
                        this.fruit.new_fruit()
                    }

                    //if the new position was in body will get a gameover massage
                    self_coalition_check(x,y){
                        if (this.body.include([x,y])){
                            //gameover method in here
                        }
                    }
                    drawSnake(){
                        var pos;
                        for (pos of this.body){
                            this.drawSnakeApart(pos[0],pos[1])
                        }

                    }
                    drawSnakeApart( x , y ){
                        this.ctx.beginPath();
                        this.ctx.rect(x*this.gridSize , y*this.gridSize ,this.gridSize,this.gridSize);
                        this.ctx.fillStyle = "#111111";
                        this.ctx.fill();
                        this.ctx.stroke();
                        this.ctx.closePath();
                    }
                }

                class Fruit{
                    constructor ( x , y , grid){
                        this.canvas = document.getElementById('myCanvas');
                        this.ctx = this.canvas.getContext("2d");
                        this.color = "#33FFDC" ;
                        this.x = x ;
                        this.y = y ;
                        this.gridSize = grid ;
                    }
                    drawFruit(){
                        this.ctx.beginPath();
                        this.ctx.arc((this.x *this.gridSize)+(this.gridSize /2)  , (this.y *this.gridSize)+(this.gridSize /2) 
                        , this.gridSize/2 , 0 ,Math.PI*2);
                        this.ctx.fillStyle = this.color ;
                        this.ctx.fill();
                        this.ctx.closePath();
                    }
                    //create new fruit
                    /*new_fruit(){
                        var random = true
                        while (random){
                            var x = Math.floor((Math.random()*10)+1); // random 1-10
                            var y = Math.floor((Math.random()*10)+1);
                            if (!(this.snake.include([x,y]))){ //checking the new fruit position if new position in snake body will random a new position 
                                random = false;
                            }
                        }
                        return [x,y]
                    }*/

                }

                class InputProcessor{
                    constructor(){
                    console.log(this.paddle);
                    document.addEventListener("keydown", this.checkInput , false);
                    //document.addEventListener("keyup", this.checkInput, false);
                    }
                
                
               
                    checkInput(e){
                        if (e.key == "ArrowRight") { 
                            console.log("R");
                            game.snake.turnRight();
                        }
                        
                        else if (e.key == "ArrowLeft") {
                            console.log("L");
                            game.snake.turnLeft();
                            }
                        else if (e.key == "ArrowUp"){
                            console.log("U");
                            game.snake.turnUp();
                        }
                        else if (e.key == "ArrowDown"){
                            console.log("D");
                            game.snake.turnDown();
                        }
                   }
                }
                var game = new Main();
                function Run(){
                    game.draw();
                }
                setInterval(Run, 500); //run every 1000 ms or 1 sec
            </script>   
        </body>
    </html>
