<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <title>Hello</title>
        <style>
            * { padding: 0; margin: 0; }
            canvas { background: #eee; display: block; margin: 0 auto; }
        </style>
    </head>
    <body>
    <canvas id="myCanvas" width="480" height="320"></canvas>
        <script>
            var canvas = document.getElementById("myCanvas");
            var ctx = canvas.getContext("2d");  
            class Main{
                constructor(){
                    /*brickRowCount
                    brickColumnCount
                    brickWidth
                    brickHeight
                    brickPadding 
                    brickOffsetTop 
                    brickOffsetLeft  
                    brick*/
                var obj_Ball = new Ball( canvas.width/2 , canvas.height-30 , 2 , -2 ,10);
                this.ball = obj_Ball ;
                var obj_Paddle = new Paddle();
                this.paddle = obj_Paddle ;
                }

                draw(){   
                    ctx.clearRect(0, 0, canvas.width, canvas.height);        
                    this.ball.drawBall() ;
                    this.ball.moveBall() ;
                    this.paddle.drawPaddle() ;
                    //new function not complete
                    this.paddle.movePaddle() ;
                }
            }
            class Ball{
                constructor( x , y , dx , dy , ballRadius){
                    this.x = x;
                    this.y = y;
                    this.dx = dx;
                    this.dy = dy;
                    this.ballRadius = ballRadius;
                }
                drawBall(){
                    ctx.beginPath();
                    ctx.arc(this.x, this.y, this.ballRadius, 0, Math.PI*2);
                    ctx.fillStyle = "#0095DD";
                    ctx.fill();
                    ctx.closePath();
                }
                moveBall(){
                    if(this.x + this.dx > canvas.width-this.ballRadius || this.x + this.dx < this.ballRadius) {
                        this.dx = -this.dx;
                    }
                    if(this.y + this.dy > canvas.height-this.ballRadius || this.y + this.dy < this.ballRadius) {
                        this.dy = -this.dy;
                    }
                    this.x += this.dx ;
                    this.y += this.dy ;
                }
            }
            class Wall{
                constructor( x , y , status){
                    

                }
            }
            class Paddle{
                constructor(){
                    var paddleHeight = 10;
                    this.paddH = paddleHeight ;
                    var paddleWidth = 75;
                    this.paddW = paddleWidth ;
                    var paddleX = (canvas.width-paddleWidth)/2;
                    this.padX= paddleX ;
                    //not complete
                    var input= new InputProcessor();
                    this.input = input;

                }
                 drawPaddle() {
                    ctx.beginPath();
                    ctx.rect(this.padX, canvas.height-this.paddH, this.paddW, this.paddH);
                    ctx.fillStyle = "#0095DD";
                    ctx.fill();
                    ctx.closePath();
                }
                //new funtion not complete
                movePaddle(){
                    document.addEventListener("keydown", this.input.keyDownHandler, false);
                    document.addEventListener("keyup", this.input.keyUpHandler, false);
                    //this.input.keyDownHandler();
                    //this.input.keyUpHandler();
                    if(this.input.rPressed) {
                        this.padX += 7;
                        if (this.padX + this.paddW > canvas.width){
                            this.padX = canvas.width - this.paddW;
                        }
                    }
                    else if(this.input.lPressed) {
                        this.padX -= 7;
                        if (this.padX < 0){
                            this.padX = 0;
                        }
                    }
                }
            }
            // not complete
            class InputProcessor{
                constructor(){
                    var rightPressed = false;
                    this.rPressed = rightPressed;
                    var leftPressed = false;
                    this.lPressed = leftPressed;
                    this.ev = event;
                }

                keyDownHandler() {
                    if(this.ev == "Right" || this.ev == "ArrowRight") {
                        this.rPressed  = true;
                    }
                    else if(this.ev == "Left" || this.ev == "ArrowLeft") {
                        this.lPressed = true;
                    }
                }
                keyUpHandler() {
                    if(this.ev == "Right" || this.evy == "ArrowRight") {
                        this.rPressed  = false;
                    }
                    else if(this.ev == "Left" || this.ev == "ArrowLeft") {
                        this.lPressed = false;
                    }
                }
            }
            
            var game=  new Main(5);
            function Run(){
                game.draw();
            }
            setInterval(Run, 10); 
            
        </script>   
    </body>
</html>